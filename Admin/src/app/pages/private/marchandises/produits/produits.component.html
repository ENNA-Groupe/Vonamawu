<div class="text-center">
    <button *ngIf="!showArchive" type="button" rel="tooltip" title="voir les produits supprimés"
        class="btn btn-danger btn-sm" id="showModal" (click)="onShowTrash()">
        <i class="material-icons">delete</i>Voir les archives
    </button>

    <button *ngIf="showArchive" type="button" rel="tooltip" title="voir les produits" class="btn btn-success btn-sm"
        id="showModal" (click)="onBackToData()">
        <i class="material-icons">visibility</i>Voir les non-archivés
    </button>

    <button *ngIf="!showArchive" type="button" rel="tooltip" title="Ajouter" class="btn btn-primary btn-sm"
        id="showModal" (click)="onAdd()">
        <i class="material-icons">add</i>Ajouter un produit
    </button>

</div>
<table class="table" *ngIf="( produitData.data|byCategorie:id|searchEntity:searchService.search).length!=0">
    <thead class="text-warning">
        <th>#</th>
        <th>Nom</th>
        <th>Quantite en Stock</th>
        <th>Quantite Réel</th>
        <th>Quantite d'alerte</th>
        <th></th>
    </thead>
    <tbody *ngIf="showArchive===false && searchService.menu==='GM'">
        <tr  [ngClass]="{'table-row': true, 'table-row-warning':item.quantiteReel<item.quantiteCritique&&item.quantiteReel>0, 'table-row-danger':item.quantiteReel<=0}"
            *ngFor="let item of produitData.data|byCategorie:id|searchEntity:searchService.search; let i=index;">
            <td>
                {{i+1}}
            </td>
            <td>
                {{ item.categorie }} {{item.nom}}     
            </td>
            <td class="text-center">
                {{item.quantiteStock}}
            </td>
            <td class="text-center">
                {{item.quantiteReel}}
            </td>
            <td class="text-center">
                {{item.quantiteCritique}}
            </td>
            <td class="td-actions text-right">
                <button type="button" rel="tooltip" title="Voir en details" (click)="onShow(item)"
                    class="btn btn-primary btn-link btn-sm">
                    <i class="material-icons">visibility</i>
                </button>
                <button type="button" rel="tooltip" title="Modifier" class="btn btn-primary btn-link btn-sm"
                    (click)="onEdit(item)">
                    <i class="material-icons">edit</i>
                </button>
                <button type="button" rel="tooltip" title="Supprimer" (click)="onDelete(item)"
                    class="btn btn-danger btn-link btn-sm">
                    <i class="material-icons">close</i>
                </button>
            </td>
        </tr>   
    </tbody>
    <tbody *ngIf="showArchive===false && searchService.menu==='M'">
            <tr  [ngClass]="{'table-row': true, 'table-row-warning':item.quantiteReel<item.quantiteCritique&&item.quantiteReel>0, 'table-row-danger':item.quantiteReel<=0}"
                *ngFor="let item of produitData.dataMaison|byCategorie:id|searchEntity:searchService.search; let i=index;">
                <td>
                    {{i+1}}
                </td>
                <td>
                    {{item.categorie}} {{item.nom}}
                </td>
                <td class="text-center">
                    {{item.quantiteStock}}
                </td>
                <td class="text-center">
                    {{item.quantiteReel}}
                </td>
                <td class="text-center">
                    {{item.quantiteCritique}}
                </td>
                <td class="td-actions text-right">
                    <button type="button" rel="tooltip" title="Voir en details" (click)="onShow(item)"
                        class="btn btn-primary btn-link btn-sm">
                        <i class="material-icons">visibility</i>
                    </button>
                    <button type="button" rel="tooltip" title="Modifier" class="btn btn-primary btn-link btn-sm"
                        (click)="onEdit(item)">
                        <i class="material-icons">edit</i>
                    </button>
                    <button type="button" rel="tooltip" title="Supprimer" (click)="onDelete(item)"
                        class="btn btn-danger btn-link btn-sm">
                        <i class="material-icons">close</i>
                    </button>
                </td>
            </tr>
    </tbody>
    <tbody *ngIf="showArchive===true && searchService.menu==='GM'">
        <tr  [ngClass]="{'table-row': true, 'table-row-warning':item.quantiteReel<item.quantiteCritique&&item.quantiteReel>0, 'table-row-danger':item.quantiteReel<=0}"
            *ngFor="let item of produitData.archives|byCategorie:id|searchEntity:searchService.search; let i=index;">
            <td>
                {{i+1}}
            </td>
            <td>
                {{ item.categorie }} {{item.nom}}     
            </td>
            <td class="text-center">
                {{item.quantiteStock}}
            </td>
            <td class="text-center">
                {{item.quantiteReel}}
            </td>
            <td class="text-center">
                {{item.quantiteCritique}}
            </td>
            <td class="td-actions text-right">
                <button type="button" rel="tooltip" title="Voir en details" (click)="onShow(item)"
                    class="btn btn-primary btn-link btn-sm">
                    <i class="material-icons">visibility</i>
                </button>
                <!-- <button type="button" rel="tooltip" title="Modifier" class="btn btn-primary btn-link btn-sm"
                    (click)="onEdit(item)">
                    <i class="material-icons">edit</i>
                </button>
                <button type="button" rel="tooltip" title="Supprimer" (click)="onDelete(item)"
                    class="btn btn-danger btn-link btn-sm">
                    <i class="material-icons">close</i>
                </button> -->
            </td>
        </tr>   
    </tbody>
    <tbody *ngIf="showArchive===true && searchService.menu==='M'">
            <tr  [ngClass]="{'table-row': true, 'table-row-warning':item.quantiteReel<item.quantiteCritique&&item.quantiteReel>0, 'table-row-danger':item.quantiteReel<=0}" 
                *ngFor="let item of produitData.archiveMaisons|byCategorie:id|searchEntity:searchService.search; let i=index;">
                <td>
                    {{i+1}}
                </td>
                <td>
                    {{item.categorie}} {{item.nom}}
                </td>
                <td class="text-center">
                    {{item.quantiteStock}}
                </td>
                <td class="text-center">
                    {{item.quantiteReel}}
                </td>
                <td class="text-center">
                    {{item.quantiteCritique}}
                </td>
                <td class="td-actions text-right">
                    <button type="button" rel="tooltip" title="Voir en details" (click)="onShow(item)"
                        class="btn btn-primary btn-link btn-sm">
                        <i class="material-icons">visibility</i>
                    </button>
                    <!-- <button type="button" rel="tooltip" title="Modifier" class="btn btn-primary btn-link btn-sm"
                        (click)="onEdit(item)">
                        <i class="material-icons">edit</i>
                    </button>
                    <button type="button" rel="tooltip" title="Supprimer" (click)="onDelete(item)"
                        class="btn btn-danger btn-link btn-sm">
                        <i class="material-icons">close</i>
                    </button> -->
                </td>
            </tr>
    </tbody>
</table>
<div *ngIf="( produitData.data|byCategorie:id|searchEntity:searchService.search).length===0">
    <span class="text-danger">Aucun produit trouvé</span>
</div>

<div class="modal" id="myModal">
    <div class="modal-dialog">
        <app-prod-form></app-prod-form>
    </div>
</div>

<div class="modal" id="myProfilModal">
    <div class="modal-dialog">
        <app-prod-profil></app-prod-profil>
    </div>
</div>